(self.webpackChunkcovid19_dashboard=self.webpackChunkcovid19_dashboard||[]).push([[675],{7675:(e,t,a)=>{"use strict";a.r(t),a.d(t,{onStart:()=>Q});var n=a(4249);class o extends n.Z{static getConfig(){return{className:"Covid.view.AttributionComponent",cls:["covid-attribution-component"],vdom:{tag:"div",style:{margin:"20px"},cn:[{tag:"h2",html:"Attribution"},{tag:"ul",cn:[{tag:"li",html:'The logos were created by <a target="_blank" href="https://www.driefmeier.com/">Sebastian Driefmeier</a>. Thank you!'},{tag:"li",html:['The logos are based on the image from <a target="_blank" href="https://phil.cdc.gov/Details.aspx?pid=23312">CDC Public Health Image Library (PHIL)</a>,</br>',"so credits to the content providers CDC/ Alissa Eckert, MS; Dan Higgins, MAMS."].join("")},{tag:"li",html:'Data provided by: <a target="_blank" href="https://github.com/NovelCOVID/API">NovelCOVID / API</a>.'},{tag:"li",html:'Country Flag Icons made by <a target="_blank" href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a target="_blank" href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>.'},{tag:"li",html:'Charts got created with <a target="_blank" href="https://www.amcharts.com/docs/v4/">amCharts 4</a>.'},{tag:"li",html:'The App is created with the webworkers driven UI framework <a target="_blank" href="https://github.com/neomjs/neo">neo.mjs</a>.'},{tag:"li",html:'The Mapbox GL Map is based on <a target="_blank" href="https://docs.mapbox.com/mapbox-gl-js/api/">Mapbox GL JS</a>.'},{tag:"li",html:'The Map & Heatmap styles are strongly inspired by <a target="_blank" href="https://blog.mapbox.com/visualizing-the-progression-of-the-2019-ncov-outbreak-66763eb59e79">Visualizing the progression of the 2019-nCoV outbreak</a>.'}]}]}}}}Neo.applyClassConfig(o);var l=a(805);class i extends l.Z{static getConfig(){return{className:"Covid.view.FooterContainer",height:25,layout:{ntype:"hbox"},reference:"footer",style:{overflow:"visible"},itemDefaults:{ntype:"component",cls:["neo-link-color"],style:{fontSize:"13px",padding:"10px",paddingTop:0}},items:[{html:'App created with <a target="_blank" href="https://github.com/neomjs/neo">neo.mjs</a>.'},{flex:1},{html:'Data provided by <a target="_blank" href="https://github.com/disease-sh/API">disease.sh/API</a>.'},{flex:1},{html:'Country Flag Icons made by <a target="_blank" href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a target="_blank" href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>.'},{ntype:"button",cls:["neo-button"],handler:"onRemoveFooterButtonClick",height:24,style:{margin:0,marginRight:"10px",marginTop:"-5px"},text:"Remove Footer"}]}}}Neo.applyClassConfig(i);var r=a(2845),s=a(9541);class c extends s.Z{static getConfig(){return{className:"Covid.model.Country",fields:[{name:"active",type:"Integer"},{name:"cases",type:"Integer"},{name:"casesPerOneMillion",type:"Integer"},{name:"country",type:"String"},{name:"countryInfo",type:"Object"},{name:"critical",type:"Integer"},{name:"deaths",type:"Integer"},{name:"index",type:"Integer"},{name:"infected",type:"Integer"},{name:"recovered",type:"Integer"},{name:"tests",type:"Integer"},{name:"testsPerOneMillion",type:"Integer"},{name:"todayCases",type:"Integer"},{name:"todayDeaths",type:"Integer"}]}}}Neo.applyClassConfig(c);var d=a(2471);class m extends d.Z{static getConfig(){return{className:"Covid.store.Countries",keyProperty:"country",model:c,sorters:[{property:"active",direction:"DESC"}]}}}Neo.applyClassConfig(m);var u=a(3192),h=a(4643);class p extends h.Z{static getStaticConfig(){return{flagRegEx:/ /gi,locales:"default"}}static getConfig(){return{className:"Covid.Util"}}static formatInfected(e){let t=e.value;return Neo.isNumber(t)?(t=Math.round(t/100),t/=100,t=t.toFixed(2)+" %",t.toLocaleString(p.locales)):t||"N/A"}static formatNumber(e,t){let a=e.value;return Neo.isNumber(a)?(a=a.toLocaleString(p.locales),"string"!=typeof t?a:`<span style="color:${t};">${a}</span>`):a||"N/A"}static getCountryFlagUrl(e){let t=e.toLowerCase().replace(p.flagRegEx,"-");if(t={bosnia:"bosnia-and-herzegovina","cabo-verde":"cape-verde",car:"central-african-republic","caribbean-netherlands":"netherlands","channel-islands":"jersey","côte-d'ivoire":"ivory-coast",congo:"republic-of-the-congo","congo,-the-democratic-republic-of-the":"democratic-republic-of-congo",curaçao:"curacao",czechia:"czech-republic","diamond-princess":"japan",drc:"democratic-republic-of-congo","el-salvador":"salvador",eswatini:"swaziland","faeroe-islands":"faroe-islands","falkland-islands-(malvinas)":"falkland-islands","french-guiana":"france",guadeloupe:"france","holy-see-(vatican-city-state)":"vatican-city","iran,-islamic-republic-of":"iran","lao-people's-democratic-republic":"laos","libyan-arab-jamahiriya":"libya",macedonia:"republic-of-macedonia","marshall-islands":"marshall-island",mayotte:"france","moldova,-republic-of":"moldova","ms-zaandam":"netherlands","new-caledonia":"france","palestinian-territory,-occupied":"palestine",poland:"republic-of-poland",réunion:"france","s.-korea":"south-korea","st.-barth":"st-barts","saint-lucia":"st-lucia","saint-martin":"sint-maarten","saint-pierre-miquelon":"france","saint-vincent-and-the-grenadines":"st-vincent-and-the-grenadines","syrian-arab-republic":"syria","tanzania,-united-republic-of":"tanzania","timor-leste":"east-timor","turks-and-caicos-islands":"turks-and-caicos","u.s.-virgin-islands":"virgin-islands",uae:"united-arab-emirates",uk:"united-kingdom",usa:"united-states-of-america",uzbekistan:"uzbekistn","venezuela,-bolivarian-republic-of":"venezuela","viet-nam":"vietnam","wallis-and-futuna":"france"}[t]||t,Neo.config.isGitHubPages){let e="../../../../resources/images/flaticon/country_flags/png/"+t+".png";return"development"!==Neo.config.environment&&(e="../../"+e),e}return"https://raw.githubusercontent.com/neomjs/pages/master/resources/images/flaticon/country_flags/png/"+t+".png"}static indexRenderer(e){return{cls:["neo-index-column","neo-table-cell"],html:e.index+1}}}Neo.applyClassConfig(p);const g=p;class y extends u.Z{static getConfig(){return{className:"Covid.view.country.Gallery",cls:["covid-country-gallery","neo-gallery","page","view"],imageHeight:280,imageWidth:340,itemTpl:{cls:["neo-gallery-item","image-wrap","view","neo-transition-1000"],tabIndex:"-1",cn:[{cls:["neo-item-wrapper"],style:{},cn:[{tag:"div",cls:["neo-country-gallery-item"],style:{},cn:[{cls:["neo-item-header"],cn:[{tag:"img",cls:["neo-flag"]},{}]},{tag:"table",cls:["neo-content-table"],cn:[{tag:"tr",cn:[{tag:"td",html:"Cases"},{tag:"td",cls:["neo-align-right"]},{tag:"td",style:{width:"100%"}},{tag:"td",html:"Cases today"},{tag:"td",cls:["neo-align-right"]}]},{tag:"tr",cn:[{tag:"td",html:"Deaths"},{tag:"td",cls:["neo-align-right","neo-content-deaths"]},{tag:"td",style:{width:"100%"}},{tag:"td",html:"Deaths today"},{tag:"td",cls:["neo-align-right","neo-content-deaths"]}]},{tag:"tr",cn:[{tag:"td",html:"Recovered"},{tag:"td",cls:["neo-align-right","neo-content-recovered"]},{tag:"td",style:{width:"100%"}},{tag:"td",html:"Critical"},{tag:"td",cls:["neo-align-right","neo-content-critical"]}]}]}]}]}]},keyProperty:"country",selectOnMount:!1,store:m}}createItem(e,t,a){let n=this,o=e.cn[0].cn[0],l=g.formatNumber,i=o.cn[1];return e.id=n.getItemVnodeId(t[n.keyProperty]),e.cn[0].style.height=n.imageHeight+"px",o.style.height=n.imageHeight-70+"px",o.style.width=n.imageWidth+"px",o.cn[0].cn[0].src=g.getCountryFlagUrl(t.country),o.cn[0].cn[1].html=t.country,i.cn[0].cn[1].html=l({value:t.cases}),i.cn[1].cn[1].html=l({value:t.deaths}),i.cn[2].cn[1].html=l({value:t.recovered}),i.cn[0].cn[4].html=l({value:t.todayCases}),i.cn[1].cn[4].html=l({value:t.todayDeaths}),i.cn[2].cn[4].html=l({value:t.critical}),e}getItemId(e){return e.split("__")[1]}onStoreLoad(e){super.onStoreLoad(e),setTimeout((()=>{this.selectOnMount=!0,this.afterSetMounted(!0,!1)}),400)}}Neo.applyClassConfig(y);var f=a(1853);class b extends f.Z{static getConfig(){return{className:"Covid.view.GalleryContainerController",gallery_:null}}beforeGetGallery(e){return e||(this._gallery=e=this.getReference("gallery")),e}onCollapseButtonClick(e){const t=this.getReference("controls-panel"),a=40===t.width;t.width=a?250:40,e.component.text=a?"X":"+"}onOrderButtonClick(e){const t=this.gallery,a=!t.orderByRow;e.component.text=!0===a?"Order By Column":"Order by Row",t.orderByRow=a}onRangefieldChange(e){this.gallery[e.component.name]=e.value}onRangefieldMounted(e){const t=Neo.getComponent(e);this.gallery.on("change"+Neo.capitalize(t.name),(function(e){e=Math.min(Math.max(e,t.minValue),t.maxValue),t.value=e}))}onSortButtonClick(e){this.gallery.store.sorters=[{property:e.component.field,direction:"DESC"}]}}Neo.applyClassConfig(b);var v=a(4242),x=a(758);class C extends l.Z{static getConfig(){return{className:"Covid.view.GalleryContainer",cls:["neo-gallery-maincontainer","neo-viewport"],controller:b,gallery:null,galleryConfig:null,layout:{ntype:"hbox",align:"stretch"},items:[{ntype:"container",flex:1,layout:"fit",items:[]},{module:v.Z,cls:["neo-configuration-panel","neo-panel","neo-container"],layout:{ntype:"vbox",align:"stretch"},reference:"controls-panel",style:{backgroundColor:"#2b2b2b"},width:260,containerConfig:{style:{overflowY:"scroll"}},headers:[{dock:"top",items:[{ntype:"button",handler:"onCollapseButtonClick",text:"X"},{ntype:"label",text:"Gallery Controls"}]}],itemDefaults:{flex:"0 1 auto",labelWidth:"110px",style:{padding:"10px"},useInputEvent:!0},items:[{module:x.Z,labelText:"Translate X",maxValue:5e3,minValue:0,name:"translateX",value:0,listeners:{change:"onRangefieldChange",mounted:"onRangefieldMounted"}},{module:x.Z,labelText:"Translate Y",maxValue:1500,minValue:-1500,name:"translateY",value:0,listeners:{change:"onRangefieldChange"}},{module:x.Z,labelText:"Translate Z",maxValue:550,minValue:-4500,name:"translateZ",value:0,listeners:{change:"onRangefieldChange",mounted:"onRangefieldMounted"}},{module:x.Z,labelText:"Amount Rows",maxValue:15,minValue:1,name:"amountRows",value:3,listeners:{change:"onRangefieldChange"}},{ntype:"button",handler:"onOrderButtonClick",text:"Order by Row",style:{margin:"20px"}},{ntype:"label",text:"Sort By:"},{ntype:"container",layout:{ntype:"hbox",align:"stretch"},style:{minHeight:"134px",padding:"0"},items:[{ntype:"container",layout:{ntype:"vbox",align:"stretch"},itemDefaults:{ntype:"button",handler:"onSortButtonClick"},items:[{field:"cases",text:"Cases",style:{margin:"10px",marginTop:"0"}},{field:"deaths",text:"Deaths",style:{margin:"10px",marginBottom:"10px",marginTop:0}},{field:"country",text:"Country",style:{margin:"10px",marginTop:0}},{field:"recovered",text:"Recovered",style:{margin:"10px",marginTop:0}}]},{ntype:"container",layout:{ntype:"vbox",align:"stretch"},itemDefaults:{ntype:"button",handler:"onSortButtonClick"},items:[{field:"todayCases",text:"Cases today",style:{margin:"10px",marginTop:"0"}},{field:"todayDeaths",text:"Deaths today",style:{margin:"10px",marginBottom:"10px",marginTop:0}},{field:"critical",text:"Critical",style:{margin:"10px",marginBottom:"43px",marginTop:0}}]}]},{module:r.Z,text:["<b>Navigation Concept</b>","<p>You can use the Arrow Keys to walk through the items.</p>"].join("")}]}]}}constructor(e){super(e);const t=this;t.gallery=Neo.create({module:y,reference:"gallery",...t.galleryConfig||{}}),t.items[0].items.push(t.gallery)}destroy(...e){this.gallery=null,super.destroy(...e)}}Neo.applyClassConfig(C);var w=a(7928);class D extends l.Z{static getConfig(){return{className:"Covid.view.HeaderContainer",cls:["covid-header-container"],height:120,layout:{ntype:"hbox",align:"stretch"},items:[{ntype:"component",minWidth:267,reference:"logo",style:{margin:"10px"},width:267,vdom:{tag:"img",src:"https://raw.githubusercontent.com/neomjs/pages/master/resources/images/apps/covid/covid_logo_dark.jpg"}},{ntype:"container",layout:{ntype:"vbox",align:"stretch"},items:[{ntype:"container",height:65,layout:{ntype:"hbox"},reference:"total-stats",itemDefaults:{ntype:"component"},items:[{cls:["covid-numberbox"],vdom:{cn:[{cls:["covid-numberbox-title","cases"],html:"Cases"},{cls:["covid-numberbox-number","cases"]}]}},{cls:["covid-numberbox"],vdom:{cn:[{cls:["covid-numberbox-title","active"],html:"Active"},{cls:["covid-numberbox-number","active"]}]}},{cls:["covid-numberbox"],vdom:{cn:[{cls:["covid-numberbox-title","recovered"],html:"Recovered"},{cls:["covid-numberbox-number","recovered"]}]}},{cls:["covid-numberbox"],vdom:{cn:[{cls:["covid-numberbox-title","deaths"],html:"Deaths"},{cls:["covid-numberbox-number","deaths"]}]}},{flex:1},{style:{padding:"10px"},width:125,vdom:{cn:[{tag:"a","aria-label":"Star neomjs/neo on GitHub",cls:["github-button"],"data-show-count":"true","data-size":"large",href:"https://github.com/neomjs/neo",html:"Star"}]}},{style:{padding:"10px"},width:105,vdom:{cn:[{tag:"a","aria-label":"Sponsor @tobiu on GitHub",cls:["github-button"],"data-icon":"octicon-heart","data-size":"large",href:"https://github.com/sponsors/tobiu",html:"Sponsor"}]}}]},{ntype:"container",layout:{ntype:"hbox"},itemDefaults:{ntype:"component"},items:[{module:w.Z,displayField:"country",flex:"none",height:25,labelPosition:"inline",labelText:"Select a Country",minWidth:140,reference:"country-field",style:{marginTop:"15px"},width:200,listeners:{clear:"onCountryFieldClear",select:"onCountryFieldSelect"},store:{module:m,sorters:[{property:"country",direction:"ASC"}]}},{ntype:"button",flex:"none",handler:"onSwitchThemeButtonClick",height:25,iconCls:"fa fa-sun",style:{marginLeft:"10px",marginTop:"15px"},text:"Theme Light"},{ntype:"button",flex:"none",handler:"onReloadDataButtonClick",height:25,iconCls:"fa fa-sync-alt",style:{marginLeft:"10px",marginTop:"15px"},text:"Reload Data"},{ntype:"label",height:25,reference:"last-update",style:{marginLeft:"10px",marginTop:"18px"},text:""}]}]}]}}}Neo.applyClassConfig(D);var R=a(5859);class k extends R.Z{static getConfig(){return{className:"Covid.view.country.Helix",cls:["covid-country-helix","neo-helix"],deltaY:1.2,itemTpl:{cls:["surface","neo-helix-item"],style:{},tabIndex:"-1",cn:[{cls:["neo-item-wrapper"],style:{},cn:[{tag:"div",cls:["neo-country-helix-item"],style:{},cn:[{cls:["neo-item-header"],cn:[{tag:"img",cls:["neo-flag"]},{}]},{tag:"table",cls:["neo-content-table"],cn:[{tag:"tr",cn:[{tag:"td",html:"Cases"},{tag:"td",cls:["neo-align-right"]},{tag:"td",style:{width:"100%"}},{tag:"td",html:"Cases today"},{tag:"td",cls:["neo-align-right"]}]},{tag:"tr",cn:[{tag:"td",html:"Deaths"},{tag:"td",cls:["neo-align-right","neo-content-deaths"]},{tag:"td",style:{width:"100%"}},{tag:"td",html:"Deaths today"},{tag:"td",cls:["neo-align-right","neo-content-deaths"]}]},{tag:"tr",cn:[{tag:"td",html:"Recovered"},{tag:"td",cls:["neo-align-right","neo-content-recovered"]},{tag:"td",style:{width:"100%"}},{tag:"td",html:"Critical"},{tag:"td",cls:["neo-align-right","neo-content-critical"]}]}]}]}]}]},keyProperty:"country",radius:2500,rotationAngle:720,showCloneInfo:!1,store:m,translateY:500,translateZ:-2300}}createItem(e,t,a){let n=e.cn[0].cn[0],o=g.formatNumber,l=n.cn[1];return e.id=this.getItemVnodeId(t[this.keyProperty]),n.cn[0].cn[0].src=g.getCountryFlagUrl(t.country),n.cn[0].cn[1].html=t.country,l.cn[0].cn[1].html=o({value:t.cases}),l.cn[1].cn[1].html=o({value:t.deaths}),l.cn[2].cn[1].html=o({value:t.recovered}),l.cn[0].cn[4].html=o({value:t.todayCases}),l.cn[1].cn[4].html=o({value:t.todayDeaths}),l.cn[2].cn[4].html=o({value:t.critical}),e}getCloneTransform(){let e=this;return"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,"+(e.offsetWidth-2800)/6+","+(e.offsetHeight-2700)/6+","+(100400+e.perspective/1.5)+",1)"}getItemId(e){return e.split("__")[1]}}Neo.applyClassConfig(k);class N extends f.Z{static getConfig(){return{className:"Covid.view.HelixContainerController",helix_:null}}beforeGetHelix(e){return e||(this._helix=e=this.getReference("helix")),e}onCollapseButtonClick(e){const t=this.getReference("controls-panel"),a=40===t.width;t.width=a?250:40,e.component.text=a?"X":"+"}onFlipItemsButtonClick(e){this.helix.flipped=!this.helix.flipped}onFollowSelectionButtonClick(e){const t=e.component;"fa fa-square"===t.iconCls?(this.helix.followSelection=!0,t.iconCls="fa fa-check-square"):(this.helix.followSelection=!1,t.iconCls="fa fa-square")}onRangefieldChange(e){const t=e.component.name;["deltaY","maxOpacity","minOpacity"].includes(t)&&(e.value/=100),this.helix[t]=e.value}onRangefieldMounted(e){const t=Neo.getComponent(e);this.helix.on(t.eventName,(function(e){e=Math.min(Math.max(e,t.minValue),t.maxValue),t.value=e}))}onSortButtonClick(e){this.helix.store.sorters=[{property:e.component.field,direction:"DESC"}]}}Neo.applyClassConfig(N);class T extends l.Z{static getConfig(){return{className:"Covid.view.HelixContainer",cls:["neo-helix-maincontainer","neo-viewport"],controller:N,helix:null,helixConfig:null,layout:{ntype:"hbox",align:"stretch"},items:[{ntype:"container",flex:1,items:[],layout:"fit"},{module:v.Z,cls:["neo-configuration-panel","neo-panel","neo-container"],layout:{ntype:"vbox",align:"stretch"},reference:"controls-panel",style:{backgroundColor:"#2b2b2b"},width:250,containerConfig:{style:{overflowY:"scroll"}},headers:[{dock:"top",items:[{ntype:"button",handler:"onCollapseButtonClick",text:"X"},{ntype:"label",text:"Helix Controls"}]}],itemDefaults:{ntype:"rangefield",flex:"0 1 auto",labelWidth:"100px",style:{padding:"10px"},useInputEvent:!0,listeners:{change:"onRangefieldChange"}},items:[{labelText:"Translate X",maxValue:2e3,minValue:-2e3,name:"translateX",value:400},{labelText:"Translate Y",maxValue:2500,minValue:-2500,name:"translateY",value:-350},{eventName:"changeTranslateZ",labelText:"Translate Z",maxValue:4500,minValue:-4500,name:"translateZ",value:-1500,listeners:{change:"onRangefieldChange",mounted:"onRangefieldMounted"}},{labelText:"Delta Y",labelAlign:"top",maxValue:600,minValue:-600,name:"deltaY",value:70},{eventName:"changeRotation",labelText:"Rotate",minValue:-720,maxValue:720,name:"rotationAngle",value:0,listeners:{change:"onRangefieldChange",mounted:"onRangefieldMounted"}},{labelText:"Radius",maxValue:3500,minValue:900,name:"radius",value:1500},{labelText:"Perspective",minValue:50,maxValue:3e3,name:"perspective",value:800},{labelText:"Item Angle",minValue:1,maxValue:36,name:"itemAngle",value:8},{labelText:"Max Opacity",name:"maxOpacity",minValue:0,maxValue:100,value:80},{labelText:"Min Opacity",name:"minOpacity",minValue:0,maxValue:100,value:30},{ntype:"button",handler:"onFlipItemsButtonClick",text:"Flip Items",listeners:{},style:{margin:"20px"}},{ntype:"label",text:"Sort By:"},{ntype:"container",layout:{ntype:"hbox",align:"stretch"},style:{minHeight:"134px",padding:"0"},items:[{ntype:"container",layout:{ntype:"vbox",align:"stretch"},itemDefaults:{ntype:"button",handler:"onSortButtonClick"},items:[{field:"cases",text:"Cases",style:{margin:"10px",marginTop:"0"}},{field:"deaths",text:"Deaths",style:{margin:"10px",marginBottom:"10px",marginTop:0}},{field:"country",text:"Country",style:{margin:"10px",marginTop:0}},{field:"recovered",text:"Recovered",style:{margin:"10px",marginTop:0}}]},{ntype:"container",layout:{ntype:"vbox",align:"stretch"},itemDefaults:{ntype:"button",handler:"onSortButtonClick"},items:[{field:"todayCases",text:"Cases today",style:{margin:"10px",marginTop:"0"}},{field:"todayDeaths",text:"Deaths today",style:{margin:"10px",marginBottom:"10px",marginTop:0}},{field:"critical",text:"Critical",style:{margin:"10px",marginBottom:"43px",marginTop:0}}]}]},{ntype:"button",handler:"onFollowSelectionButtonClick",iconCls:"fa fa-square",text:"Follow Selection",listeners:{},style:{margin:"20px",marginBottom:"10px"}},{module:r.Z,text:["<b>Navigation Concept</b>","<p>Click on an item to select it. Afterwards you can use the Arrow Keys to walk through the items.</p>","<p>Hit the Space Key to rotate the currently selected item to the front.</p>","<p>Hit the Enter Key to expand the currently selected item.</p>"].join("")}]}]}}constructor(e){super(e);const t=this;t.helix=Neo.create({module:k,reference:"helix",...t.helixConfig||{}}),t.items[0].items.push(t.helix)}}Neo.applyClassConfig(T);var S=a(2926);class F extends f.Z{static getConfig(){return{className:"Covid.view.MainContainerController",ntype:"maincontainer-controller",activeMainTabIndex:0,apiSummaryUrl:"https://disease.sh/v2/all",apiUrl:"https://disease.sh/v2/countries",countryRecord:null,data:null,mainTabs:["table","mapboxglmap","worldmap","gallery","helix","attribution"],mapboxglMapHasData:!1,summaryData:null,worldMapHasData:!1}}onConstructed(){super.onConstructed();const e=this;e.loadData(),e.loadSummaryData(),e.view.on("mounted",e.onMainViewMounted,e)}addStoreItems(e){const t=this,a=t.getReference("country-field").store,n=t.mainTabs[t.activeMainTabIndex],o=t.getReference(n);if(e[0]&&"World"===e[0].country){const t=e.shift();console.log(t)}e.forEach((e=>{e.country.includes('"')&&(e.country=e.country.replace('"',"'")),e.casesPerOneMillion=e.casesPerOneMillion>e.cases?"N/A":e.casesPerOneMillion||0,e.infected=e.casesPerOneMillion})),t.data=e,a.getCount()<1&&(t.getReference("country-field").store.data=e),["gallery","helix","table"].includes(n)?o.store.data=e:"mapboxglmap"===n?(t.getReference("mapboxglmap").data=e,t.mapboxglMapHasData=!0):"worldmap"===n&&(o.loadData(e),t.worldMapHasData=!0)}applySummaryData(e){let t=this,a=t.getReference("total-stats"),n=a.vdom;t.summaryData=e,n.cn[0].cn[1].html=g.formatNumber({value:e.cases}),n.cn[1].cn[1].html=g.formatNumber({value:e.active}),n.cn[2].cn[1].html=g.formatNumber({value:e.recovered}),n.cn[3].cn[1].html=g.formatNumber({value:e.deaths}),a.vdom=n,a=t.getReference("last-update"),n=a.vdom,n.html="Last Update: "+new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric",second:"numeric"}).format(new Date(e.updated)),a.vdom=n}clearCountryField(e){this.getReference("country-field").clear()}getTabIndex(e){return e&&e.mainview?this.mainTabs.indexOf(e.mainview):0}getView(e){return this.getReference(this.mainTabs[e])}loadData(){const e=this;fetch(e.apiUrl).then((e=>e.json())).then((t=>e.addStoreItems(t))).catch((t=>console.log("Can’t access "+e.apiUrl,t)))}loadSummaryData(){const e=this;fetch(e.apiSummaryUrl).then((e=>e.json())).then((t=>e.applySummaryData(t))).catch((t=>console.log("Can’t access "+e.apiSummaryUrl,t))),setTimeout((()=>{e.summaryData||e.onLoadSummaryDataFail()}),2e3)}onCountryFieldClear(){this.countryRecord=null,Neo.Main.editRoute({country:null})}onCountryFieldSelect(e){this.countryRecord=e.record,Neo.Main.editRoute({country:e.value})}onHashChange(e,t){let a,n=this,o=n.getTabIndex(e.hash),l=e.hash&&e.hash.country,i=n.getReference("country-field"),r=n.getReference("tab-container"),s=n.getView(o),c=s.selectionModel,d=n.data?r.activeIndex!==o?100:0:1e3;r.activeIndex=o,n.activeMainTabIndex=o,"helix"===s.ntype&&s.getOffsetValues(),n.data&&s.store&&s.store.getCount()<1&&(s.store.data=n.data,d=500),1e3===d&&"table-container"===s.ntype&&(d=2e3),"mapboxgl"===s.ntype&&n.data?(n.mapboxglMapHasData||(s.data=n.data,n.mapboxglMapHasData=!0),n.countryRecord&&F.selectMapboxGlCountry(s,n.countryRecord),s.autoResize()):"covid-world-map"===s.ntype&&n.data?n.worldMapHasData||(s.loadData(n.data),n.worldMapHasData=!0):setTimeout((()=>{if(n.data)switch(l?i.value=l:e.country="all",s.ntype){case"gallery":l&&!c.isSelected(l)&&c.select(l,!1);break;case"helix":l&&!c.isSelected(l)&&(c.select(l,!1),s.onKeyDownSpace(null));break;case"table-container":a=c.getRowId(s.store.indexOf(l)),n.getReference("table-container").fire("countrySelect",{record:s.store.get(l)}),l&&!c.isSelected(a)&&(c.select(a),Neo.main.DomAccess.scrollToTableRow({id:a}))}}),d)}onLoadSummaryDataFail(){const e=this.getReference("table"),t=e.vdom;t.cn[0].cn[1].cn.push({tag:"div",cls:["neo-box-label","neo-label"],html:["Summary data did not arrive after 2s.</br>","Please double-check if the API is offline:</br></br>",'<a target="_blank" href="https://disease.sh/all">NovelCOVID/API all endpoint</a></br></br>',"and if so please try again later."].join(""),style:{margin:"20px"}}),e.vdom=t}onMainViewMounted(){const e=this;Neo.main.DomAccess.addScript({async:!0,defer:!0,src:"https://buttons.github.io/buttons.js"}),e.getReference("gallery").on("select",e.updateCountryField,e),e.getReference("helix").on("select",e.updateCountryField,e),e.getReference("tab-container").on("moveTo",e.onTabMove,e),e.getReference("table").on({deselect:e.clearCountryField,select:e.updateCountryField,scope:e})}onReloadDataButtonClick(e){this.loadData(),this.loadSummaryData()}onRemoveFooterButtonClick(e){const t=this,a=t.getReference("tab-container").getActiveCard();t.view.remove(t.getReference("footer"),!0),"covid-mapboxgl-container"===a.ntype&&t.getReference("mapboxglmap").autoResize()}onSwitchThemeButtonClick(e){let t,a,n,o,l,i,r=this,s=e.component,c=r.getReference("logo"),d=r.getReference("mapboxglmap"),m=c.vdom,u=r.view;"Theme Light"===s.text?(t="Theme Dark",n="../dist/development/neo-theme-light-no-css-vars.css",o="fa fa-moon",l=d.mapboxStyleLight,i="neo-theme-light"):(t="Theme Light",n="../dist/development/neo-theme-dark-no-css-vars.css",o="fa fa-sun",l=d.mapboxStyleDark,i="neo-theme-dark"),m.src="https://raw.githubusercontent.com/neomjs/pages/master/resources/images/apps/covid/"+("neo-theme-dark"===i?"covid_logo_dark.jpg":"covid_logo_light.jpg"),c.vdom=m,Neo.config.useCssVars?(a=[...u.cls],u.cls.forEach((e=>{e.includes("neo-theme")&&S.Z.remove(a,e)})),S.Z.add(a,i),u.cls=a,s.set({iconCls:o,text:t})):Neo.main.addon.Stylesheet.swapStyleSheet({href:n,id:"neo-theme"}).then((e=>{s.text=t})),d.mapboxStyle=l}onTabMove(e){S.Z.move(this.mainTabs,e.fromIndex,e.toIndex)}static selectMapboxGlCountry(e,t){console.log(t.countryInfo.iso2);const a={FRA:["match",["get","NAME"],["France"],!0,!1],NOR:["match",["get","NAME"],["Norway"],!0,!1],default:["match",["get","ISO_A3"],[t.countryInfo.iso3],!0,!1]};e.setFilter({layerId:"ne-10m-admin-0-countries-4s7rvf",value:a[t.countryInfo.iso3]||a.default}),e.flyTo({lat:t.countryInfo.lat,lng:t.countryInfo.long}),e.zoom=5}updateCountryField(e){Neo.Main.editRoute({country:e.record.country})}}Neo.applyClassConfig(F);var M=a(2894),I=a(2173);class V extends I.Z{static getConfig(){return{className:"Covid.view.mapboxGl.Component",accessToken:"pk.eyJ1IjoidG9iaXUiLCJhIjoiY2s4dTlsdHA5MDRmYzNtcGxlczFpcGVncyJ9.qcmzDjpdyQeLtz9z7d7CkA",center:{lat:40,lng:20},dataSourceId:"covid19",layers:[{beforeId:"waterway-label",id:"hillshading",source:"dem",type:"hillshade"},{beforeId:"waterway-label",filter:[">",["get","cases"],0],id:"covid19-heat",source:"covid19",type:"heatmap",paint:{"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0,0,0,0)",.1,"#927903",.15,"#ffd403",1,"#ff0000"],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,3,9,5],"heatmap-opacity":["interpolate",["linear"],["zoom"],5,.95,6,0],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,1,4,2,8,3,16,4,32,5,64,6,128,7,256,8,512,9,1024],"heatmap-weight":["interpolate",["linear"],["get","cases"],0,0,1e4,1]}},{beforeId:"waterway-label",filter:[">",["get","cases"],0],id:"covid19-circle",source:"covid19",type:"circle",minzoom:5,paint:{"circle-color":["step",["get","cases"],"#9ad5ff",0,"#9af6ff",20,"#00ffff",200,"#ffff00",400,"#f1f075",800,"#f9b196",1e3,"#f28cb1",2e3,"#f28cb1"],"circle-opacity":["interpolate",["linear"],["zoom"],5,0,6,.6],"circle-radius":["step",["get","cases"],10,100,20,500,30,1e3,40,1e4,50],"circle-translate":[0,20]}},{beforeId:"waterway-label",filter:[">",["get","cases"],0],id:"covid19-circle-text",source:"covid19",type:"symbol",minzoom:5,layout:{"text-allow-overlap":!0,"text-field":["to-string",["get","cases"]],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-ignore-placement":!0,"text-size":12},paint:{"text-opacity":["interpolate",["linear"],["zoom"],5,0,7,1],"text-translate":[0,20]}}],mapboxStyle:"mapbox://styles/tobiu/ck944yerq3hrj1ip91o34fa7d",mapboxStyleDark:"mapbox://styles/tobiu/ck8yaxakx11zx1ilgshq451cv",mapboxStyleLight:"mapbox://styles/tobiu/ck9459ple0qc71invugdz6bbf",sources:[{id:"covid19",type:"geojson",data:{type:"FeatureCollection",features:[]}},{id:"dem",type:"raster-dem",url:"mapbox://mapbox.terrain-rgb"}]}}}Neo.applyClassConfig(V);class A extends f.Z{static getConfig(){return{className:"Covid.view.mapboxGl.ContainerController",ntype:"mapboxgl-container-controller"}}changeLayerVisibility(e,t){this.getReference("mapboxglmap").setLayoutProperty({layerId:e,key:"visibility",value:t})}onDetailCirclesChange(e){const t=e.value?"visible":"none";this.changeLayerVisibility("covid19-circle",t),this.changeLayerVisibility("covid19-circle-text",t)}onHeatMapChange(e){this.changeLayerVisibility("covid19-heat",e.value?"visible":"none")}onHideMapControlsButtonClick(e){console.log("onHideMapControlsButtonClick",e)}onTerrainChange(e){this.changeLayerVisibility("hillshading",e.value?"visible":"none")}}Neo.applyClassConfig(A);class B extends l.Z{static getConfig(){return{className:"Covid.view.mapboxGl.Container",ntype:"covid-mapboxgl-container",controller:A,items:[{module:V,reference:"mapboxglmap"},{module:v.Z,height:150,ignoreLayout:!0,containerConfig:{style:{opacity:.6,padding:"10px"}},headers:[{dock:"top",items:[{ntype:"button",handler:"onHideMapControlsButtonClick",text:"X"},{ntype:"label",text:"Map Controls"}],style:{opacity:1}}],itemDefaults:{module:M.Z,flex:"0 1 auto",labelWidth:100},items:[{checked:!0,labelText:"Detail Circles",listeners:{change:"onDetailCirclesChange"}},{checked:!0,labelText:"HeatMap",listeners:{change:"onHeatMapChange"},style:{marginTop:"5px"}},{checked:!0,labelText:"Terrain",listeners:{change:"onTerrainChange"},style:{marginTop:"5px"}}],style:{backgroundColor:"transparent",position:"absolute",right:"10px",top:"10px"}}],layout:{ntype:"fit"},_vdom:{style:{position:"relative",height:"100%",width:"100%"},cn:[{style:{position:"absolute",height:"100%",width:"100%"},cn:[{style:{height:"100%"},cn:[]}]}]}}}getVdomRoot(){return this.vdom.cn[0].cn[0]}getVnodeRoot(){return this.vnode.childNodes[0].childNodes[0]}}Neo.applyClassConfig(B);var H=a(7886),Z=a(1405);class O extends s.Z{static getConfig(){return{className:"Covid.model.HistoricalData",fields:[{name:"active",type:"int"},{name:"cases",type:"int"},{name:"date",type:"string"},{name:"dailyActive",type:"int"},{name:"dailyCases",type:"int"},{name:"dailyDeaths",type:"int"},{name:"dailyRecovered",type:"int"},{name:"deaths",type:"int"},{name:"recovered",type:"int"}]}}}Neo.applyClassConfig(O);class P extends d.Z{static getConfig(){return{className:"Covid.store.HistoricalData",keyProperty:"date",model:O,sorters:[{property:"date",direction:"DESC"}]}}}Neo.applyClassConfig(P);class L extends Z.Z{static getConfig(){return{className:"Covid.view.country.HistoricalDataTable",cls:["covid-historical-data-table","neo-table-container"],columnDefaults:{align:"right",defaultSortDirection:"DESC",renderer:g.formatNumber},columns:[{align:"left",dataField:"date",dock:"left",text:"Date",width:100,renderer:function(e){return{cls:["neo-date-column","neo-table-cell"],html:new Intl.DateTimeFormat("default",{day:"numeric",month:"numeric",year:"numeric"}).format(new Date(e.value))}}},{dataField:"cases",text:"Cases",renderer:e=>g.formatNumber(e)},{dataField:"active",text:"Active",renderer:e=>g.formatNumber(e,"#64B5F6")},{dataField:"recovered",text:"Recovered",renderer:e=>g.formatNumber(e,"#28ca68")},{dataField:"deaths",text:"Deaths",renderer:e=>g.formatNumber(e,"#fb6767")},{dataField:"dailyCases",text:"Daily C",renderer:e=>g.formatNumber(e)},{dataField:"dailyActive",text:"Daily A",renderer:e=>g.formatNumber(e,"#64B5F6")},{dataField:"dailyRecovered",text:"Daily R",renderer:e=>g.formatNumber(e,"#28ca68")},{dataField:"dailyDeaths",text:"Daily D",renderer:e=>g.formatNumber(e,"#fb6767")}],store:P}}}Neo.applyClassConfig(L);var j=a(1795);class z extends j.Z{static getConfig(){return{className:"Covid.view.country.LineChartComponent",cls:["covid-line-chart"],chartConfig:{cursor:{maxTooltipDistance:-1},legend:{labels:{template:{fill:"#bbb"}}},xAxes:[{type:"DateAxis",renderer:{minGridDistance:60,labels:{template:{fill:"#bbb"}}}}],yAxes:[{type:"ValueAxis",logarithmic:!0,numberFormatter:{numberFormat:"#.0a",bigNumberPrefixes:[{number:1e3,suffix:"K"},{number:1e6,suffix:"M"},{number:1e9,suffix:"B"}]},renderer:{minGridDistance:60,labels:{template:{fill:"#bbb"}}}}],series:[{type:"LineSeries",dataFields:{dateX:"date",valueY:"active"},fill:"#64b5f6",name:"Active",stroke:"#64b5f6",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"cases"},fill:"#bbb",name:"Cases",stroke:"#bbb",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"deaths"},fill:"#fb6767",name:"Deaths",stroke:"#fb6767",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"recovered"},fill:"#28ca68",name:"Recovered",stroke:"#28ca68",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}}]},combineSeriesTooltip:!0,fitParentHeight:!0}}}Neo.applyClassConfig(z);class _ extends Z.Z{static getConfig(){return{className:"Covid.view.country.Table",cls:["covid-country-table","neo-table-container"],columnDefaults:{align:"right",defaultSortDirection:"DESC",renderer:g.formatNumber},columns:[{cls:["neo-index-column","neo-table-header-button"],dataField:"index",dock:"left",minWidth:40,text:"#",renderer:g.indexRenderer,width:40},{align:"left",dataField:"country",defaultSortDirection:"ASC",dock:"left",text:"Country",width:200,renderer:e=>({cls:["neo-country-column","neo-table-cell"],html:['<div style="display: flex; align-items: center">','<img style="height:20px; margin-right:10px; width:20px;" src="'+g.getCountryFlagUrl(e.value)+'">'+e.value,"</div>"].join("")})},{dataField:"cases",text:"Cases"},{dataField:"casesPerOneMillion",text:"Cases / 1M"},{dataField:"infected",text:"Infected",renderer:e=>g.formatInfected(e)},{dataField:"active",text:"Active",renderer:e=>g.formatNumber(e,"#64B5F6")},{dataField:"recovered",text:"Recovered",renderer:e=>g.formatNumber(e,"#28ca68")},{dataField:"critical",text:"Critical",renderer:e=>g.formatNumber(e,"orange")},{dataField:"deaths",text:"Deaths",renderer:e=>g.formatNumber(e,"#fb6767")},{dataField:"todayCases",text:"Cases today"},{dataField:"todayDeaths",text:"Deaths today",renderer:e=>g.formatNumber(e,"#fb6767")},{dataField:"tests",text:"Tests"},{dataField:"testsPerOneMillion",text:"Tests / 1M"}],store:m}}}Neo.applyClassConfig(_);class E extends f.Z{static getConfig(){return{className:"Covid.view.TableContainerController",apiBaseUrl:"https://disease.sh/",apiHistoricalDataEndpoint:"v2/historical/",apiHistoricalDataTimeRange:"all",removeEmptyRecords:!0,selectedRecord:null,table_:null}}onConstructed(){super.onConstructed();const e=this;e.view.on("countrySelect",e.onTableSelect,e)}addStoreItems(e){const t=this,a=[],n={};let o,l=e&&e.timeline;e&&!e.timeline&&(l=e),l&&(Object.entries(l.cases).forEach((([e,t])=>{n[e]={date:new Date(e).toISOString(),cases:t}})),Object.entries(l.deaths).forEach((([e,t])=>{n.hasOwnProperty(e)?n[e].deaths=t:n[e]={date:new Date(e).toISOString(),deaths:t}})),l.hasOwnProperty("recovered")&&Object.entries(l.recovered).forEach((([e,t])=>{n.hasOwnProperty(e)?n[e].recovered=t:n[e]={date:new Date(e).toISOString(),recovered:t}})),Object.entries(n).forEach((([e,t])=>{t.active=t.cases-t.deaths-t.recovered,a.push(t)})),t.removeEmptyRecords&&[...a].forEach((e=>{0===e.cases&&S.Z.remove(a,e)})),Object.assign(a[0],{dailyActive:a[0].active,dailyCases:a[0].cases,dailyDeaths:a[0].deaths,dailyRecovered:a[0].recovered}),a.forEach(((e,t)=>{o=a[t+1],o&&Object.assign(o,{dailyActive:o.active-e.active,dailyCases:o.cases-e.cases,dailyDeaths:o.deaths-e.deaths,dailyRecovered:o.recovered-e.recovered})})),t.getReference("historical-data-table").store.data=a,t.updateLineChart(a))}static assignFieldsOrNull(e){return{active:e.active||null,cases:e.cases||null,deaths:e.deaths||null,dailyActive:e.dailyActive||null,dailyCases:e.dailyCases||null,dailyDeaths:e.dailyDeaths||null,dailyRecovered:e.dailyRecovered||null,recovered:e.recovered||null}}beforeGetTable(e){return e||(this._table=e=this.getReference("table")),e}loadHistoricalData(e){const t=this,a=t.apiBaseUrl+t.apiHistoricalDataEndpoint+e+"?lastdays="+t.apiHistoricalDataTimeRange;fetch(a).then((e=>e.json())).then((e=>t.addStoreItems(e))).catch((e=>console.log("Can’t access "+a,e)))}on520pxButtonClick(e){this.getReference("controls-panel").width=520}on800pxButtonClick(e){this.getReference("controls-panel").width=800}onCollapseButtonClick(e){const t=this.getReference("controls-panel"),a=40===t.width;t.width=a?this.view.historyPanelWidth:40,e.component.text=a?"X":"+"}onDailyValuesChange(e){const t=this.getReference("line-chart").id,a=this.getReference("logarithmic-scale-checkbox"),n=e.value;n?a.set({checked:!1,disabled:e.value}):a.disabled=!1,Neo.main.addon.AmCharts.setProperties({id:t,properties:{"series.values.0.dataFields.valueY":n?"dailyActive":"active","series.values.1.dataFields.valueY":n?"dailyCases":"cases","series.values.2.dataFields.valueY":n?"dailyDeaths":"deaths","series.values.3.dataFields.valueY":n?"dailyRecovered":"recovered"}}),Neo.main.addon.AmCharts.callMethod({id:t,path:"invalidateData"})}onLogarithmicScaleChange(e){Neo.main.addon.AmCharts.setProperty({id:this.getReference("line-chart").id,path:"yAxes.values.0.logarithmic",value:e.value})}onTableSelect(e){const t=this,a=e.record;e.record?t.selectedRecord={...a}:t.selectedRecord=null,t.loadHistoricalData(a&&a.countryInfo&&a.countryInfo.iso2||"all"),t.getReference("historical-data-label").html="Historical Data ("+(a&&a.country||"World")+")"}updateLineChart(e){let t=this,a=t.selectedRecord,n=t.getReference("line-chart");e.forEach((e=>Object.assign(e,E.assignFieldsOrNull(e)))),a||(a=t.getParent().summaryData),a&&e.push({date:(new Date).toISOString(),...E.assignFieldsOrNull(a)}),n.data=e}}Neo.applyClassConfig(E);class G extends l.Z{static getConfig(){return{className:"Covid.view.TableContainer",autoMount:!0,controller:E,historyPanelWidth:520,table:null,tableConfig:null,layout:{ntype:"hbox",align:"stretch"},items:[{ntype:"container",flex:1,layout:"fit",items:[]},{module:v.Z,cls:["neo-configuration-panel","neo-panel","neo-container"],layout:{ntype:"vbox",align:"stretch"},reference:"controls-panel",style:{backgroundColor:"#2b2b2b"},width:"@config:historyPanelWidth",containerConfig:{flex:null,style:{overflowY:"scroll"}},headers:[{dock:"top",items:[{ntype:"button",handler:"onCollapseButtonClick",text:"X"},{ntype:"label",reference:"historical-data-label",text:"Historical Data"},"->",{ntype:"button",handler:"on520pxButtonClick",text:"520px"},{ntype:"button",handler:"on800pxButtonClick",text:"800px"}]}],items:[{module:H.Z,style:{marginTop:"10px"},items:[{ntype:"container",layout:{ntype:"vbox",align:"stretch"},items:[{ntype:"toolbar",flex:"0 1 auto",items:[{module:M.Z,checked:!0,labelText:"Logarithmic Scale",labelWidth:135,reference:"logarithmic-scale-checkbox",listeners:{change:"onLogarithmicScaleChange"}},{module:M.Z,labelText:"Daily Values",style:{marginLeft:"30px"},labelWidth:95,listeners:{change:"onDailyValuesChange"}}]},{module:z,flex:1,reference:"line-chart"}],tabButtonConfig:{iconCls:"fa fa-chart-line",text:"Chart"}}]}]}]}}constructor(e){super(e);const t=this;t.historicalDataTable=Neo.create({module:L,reference:"historical-data-table",tabButtonConfig:{iconCls:"fa fa-table",text:"Table"},...t.historicalDataTableConfig||{}}),t.items[1].items[0].items.push(t.historicalDataTable),t.table=Neo.create({module:_,reference:"table",...t.tableConfig||{}}),t.items[0].items.push(t.table)}}Neo.applyClassConfig(G);var W=a(6748),Y=a(1081),U=a(9434);class X extends j.Z{static getConfig(){return{className:"Covid.view.WorldMapComponent",ntype:"covid-world-map",chartType:"MapChart",cls:["covid-world-map"],dataPath:"series.values.0",heatRulesMaxValue:15e3,package:"am4maps",chartConfig:{projection:"Miller",geodata:"worldLow",series:[{type:"MapPolygonSeries",exclude:["AQ"],useGeodata:!0,dataFields:{value:"active"},heatRules:[{max:"#64b5f6",maxValue:"@config:heatRulesMaxValue",min:"#ffffff",minValue:0,property:"fill",target:"mapPolygons.template"}],mapPolygons:{tooltipText:"{name}: [bold]{value}[/]",states:{hover:{properties:{}}}}}]}}}loadData(e){const t=[];e.forEach((e=>{t.push({active:e.active,cases:e.cases,critical:e.critical,deaths:e.deaths,id:e.countryInfo.iso2,name:e.country,recovered:e.recovered})})),Neo.main.addon.AmCharts.updateData({data:t,dataPath:this.dataPath,id:this.id})}}Neo.applyClassConfig(X);class q extends f.Z{static getConfig(){return{className:"Covid.view.WorldMapContainerController",heatRuleChangeDelay:150,heatRuleChangeTimeout:null}}changeHeatRule(e){const t=this.getReference("worldmap").id;Neo.main.addon.AmCharts.setProperty({id:this.getReference("worldmap").id,path:"series.values.0.heatRules.values.0.maxValue",value:e}),Neo.main.addon.AmCharts.callMethod({id:t,path:"series.values.0.invalidateData"})}onHeatRuleFieldChange(e){const t=this;clearTimeout(t.heatRuleChangeTimeout),t.heatRuleChangeTimeout=setTimeout((()=>{t.changeHeatRule(e.value)}),t.heatRuleChangeDelay)}onSeriesButtonClick(e){const t=this,a=t.getReference("worldmap").id,n=[...t.getParent().data];Neo.main.addon.AmCharts.setProperty({id:a,isColor:!0,path:"series.values.0.heatRules.values.0.max",value:{active:"#64b5f6",cases:"#bbbbbb",deaths:"#fb6767",recovered:"#28ca68"}[e.component.series]}),Neo.main.addon.AmCharts.setProperty({id:a,path:"series.values.0.dataFields.value",value:e.component.series}),Neo.main.addon.AmCharts.callMethod({id:a,path:"series.values.0.invalidateData"}).then((()=>{t.getReference("currentMapViewLabel").text="Current view: "+Neo.capitalize(e.component.series),n.sort(((t,a)=>a[e.component.series]-t[e.component.series])),t.getReference("heatRuleField").value=100*Math.ceil(n[9][e.component.series]/100)}))}}Neo.applyClassConfig(q);class K extends l.Z{static getConfig(){return{className:"Covid.view.WorldMapContainer",controller:q,layout:{ntype:"vbox",align:"stretch"},items:[{module:U.Z,flex:"none",items:[{ntype:"label",reference:"currentMapViewLabel",style:{marginRight:"20px"},text:"Current view: Active"},{module:Y.Z,clearToOriginalValue:!0,labelPosition:"inline",labelText:"HeatRule maxValue",maxValue:1e6,minValue:100,reference:"heatRuleField",stepSize:100,style:{margin:0},value:15e3,width:150,listeners:{change:"onHeatRuleFieldChange"}},"->",{handler:"onSeriesButtonClick",series:"cases",style:{marginRight:"2px"},text:'<span style="color: #bbbbbb">●</span> Cases'},{handler:"onSeriesButtonClick",series:"active",style:{marginRight:"2px"},text:'<span style="color: #64b5f6">●</span> Active'},{handler:"onSeriesButtonClick",series:"recovered",style:{marginRight:"2px"},text:'<span style="color: #28ca68">●</span> Recovered'},{handler:"onSeriesButtonClick",series:"deaths",text:'<span style="color: #fb6767">●</span> Deaths'}]},{module:X,flex:1,reference:"worldmap"}]}}}Neo.applyClassConfig(K);class J extends W.Z{static getConfig(){return{className:"Covid.view.MainContainer",autoMount:!0,cls:["covid-viewport","neo-viewport"],controller:F,items:[D,{module:H.Z,flex:1,reference:"tab-container",sortable:!0,style:{margin:"10px",marginTop:0},items:[{module:G,reference:"table-container",tabButtonConfig:{iconCls:"fa fa-table",route:"mainview=table",text:"Table"}},{module:B,tabButtonConfig:{iconCls:"fa fa-globe-americas",route:"mainview=mapboxglmap",text:"Mapbox GL Map"}},{module:K,tabButtonConfig:{iconCls:"fa fa-globe-americas",route:"mainview=worldmap",text:"World Map"}},{module:C,tabButtonConfig:{iconCls:"fa fa-images",route:"mainview=gallery",text:"Gallery"}},{module:T,tabButtonConfig:{iconCls:"fa fa-dna",route:"mainview=helix",text:"Helix"}},{module:o,reference:"attribution",tabButtonConfig:{iconCls:"fa fa-copyright",route:"mainview=attribution",text:"Attribution"}}]},i],layout:{ntype:"vbox",align:"stretch"}}}}Neo.applyClassConfig(J);const Q=()=>Neo.app({appPath:"apps/covid/",mainView:J,name:"Covid"})}}]);